CREATE DATABASE ADBMS;
USE ADBMS;

CREATE TABLE BOOKS(
ISBN VARCHAR(20) PRIMARY KEY,
AUTHOR VARCHAR(25),
TOPIC VARCHAR(25),
TOTAL_STOCK INT,
PRICE FLOAT
);

CREATE TABLE BOOKSTORE(
STORE_NO VARCHAR(20) PRIMARY KEY,
CITY VARCHAR(50),
STATE VARCHAR(50),
ZIP INT,
INVENTORY_VALUE FLOAT
);


CREATE TABLE STOCK(
STORE_NO VARCHAR(20),
ISBN VARCHAR(20),
QUANTITY INT,
PRIMARY KEY (STORE_NO, ISBN)
);

DESC BOOKS;
DESC BOOKSTORE;
DESC STOCK;


INSERT INTO BOOKS
VALUES
("1234", "AMAAN", "KNOW FOOTBALL", 5000, 15),
("1235", "ABHAY", "GENERAL KNOWLEDGE", 2500, 19),
("1236", "JASRAJ", "ADBMS", 12000, 50.05),
("1233", "JAGJYOT", "JAVA", 10000, 25.50),
("1230", "ATHARV", "OPERATING SYSTEMS", 5000, 75),
("1237", "MAURICE BATCH", "UNIX", 20000, 200)
;

INSERT INTO BOOKSTORE
VALUES
("1", "NANDED", "MAHARASHTRA", 24985, 500),
("2", "NANDED", "MAHARASHTRA", 26341, 1000),
("3", "SOLAPUR", "MAHARASHTRA", 57912, 2000),
("4", "KASHMIR", "JAMMU KASHMIR", 78610, 3000),
("5", "ENGLAND", "UNITED KINGDOM", 99999, 10000)
;

INSERT INTO STOCK
VALUES
("3", "1234", 350),
("4", "1235", 450),
("1", "1236", 250),
("5", "1237", 500),
("2", "1233", 250)
;


SELECT * FROM BOOKS;
SELECT * FROM BOOKSTORE;
SELECT * FROM STOCK;


-- QUERY TO FIND TOTAL NUMBER OF BOOKS IN STOCK WHERE PRICE IS BETWEEN $15 AND $55
SELECT SUM(TOTAL_STOCK)AS TOTAL_STOCK FROM BOOKS WHERE PRICE >= 15 AND PRICE <= 55;


-- QUERY TO UPDATE THE BOOK PRICE OF BOOK WITH NO = 1234 FROM $45 TO $55 AT SITE 3
UPDATE BOOKS SET PRICE = 55 WHERE ISBN = "1234";
SELECT * FROM BOOKS;


-- QUERY TO FIND TOTAL NUMBER OF BOOKS AT SITE 2
SELECT SUM(QUANTITY) FROM STOCK WHERE STOCK.STORE_NO IN (SELECT STORE_NO FROM BOOKSTORE WHERE ZIP >= 25001 AND ZIP <= 50000);